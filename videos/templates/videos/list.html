<!DOCTYPE html>
{% load custom_filters %}
<html>

<head>
    <title>Video List</title>
</head>

<body>
    <h1>Video Administration</h1>
    <form method="get">
        <input type="text" name="q" value="{{ q }}" placeholder="Search...">
        <select name="field">
            {% for field in fields %}
            <option value="{{ field }}" {% if selected_field==field %}selected{% endif %}>{{ field }}</option>
            {% endfor %}
        </select>
        <button type="submit">Search</button>
    </form>
    <table border="1">
        <thead>
            <tr>
                {% for field in fields %}
                <th>{{ field }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for video in object_list %}
            <tr>
                {% for field in fields %}
                <td>
                    {% if field == 'id' %}
                    <a href="{% url 'video_update' video.id %}">{{ video.id }}</a>
                    {% else %}
                    {{ video|getattr:field }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{{ fields|length }}">No videos found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination">
        {% if is_paginated %}
        {% if page_obj.has_previous %}
        <a
            href="?page={{ page_obj.previous_page_number }}{% if q %}&q={{ q }}&field={{ selected_field }}{% endif %}">Previous</a>
        {% endif %}
        <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
        <a
            href="?page={{ page_obj.next_page_number }}{% if q %}&q={{ q }}&field={{ selected_field }}{% endif %}">Next</a>
        {% endif %}
        {% endif %}
    </div>
</body>

</html>